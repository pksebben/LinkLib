{
    "anchor": 0,
    "found_anchor": false,
    "found_newest": true,
    "found_oldest": true,
    "history_limited": false,
    "messages": [
        {
            "avatar_url": "https://secure.gravatar.com/avatar/d96d4baab5c40af1eda5fd533d650f25?d=identicon&version=1",
            "client": "desktop app Mac 0.3.8",
            "content": "<p>I just read <span class=\"user-mention\" data-user-email=\"allison@hackerschool.com\">@Allison Kaptur</span> 's email and thought that writing an IRC server and contributing to the project would be an awesome thing to do. Anyone want to pair?</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 11557053,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "jeffblagdon@gmail.com",
            "sender_full_name": "Jeff Blagdon (F'13)",
            "sender_id": 2878,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Contributing and mini-project",
            "submessages": [],
            "timestamp": 1382027519,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/4401c7ea9c62aa8e62f7c8907b1db771?d=identicon&version=1",
            "client": "desktop app Mac 0.3.8",
            "content": "<p>I'm definitely interested in this. <span class=\"user-mention\" data-user-email=\"moshe.bildner@gmail.com\">@Moshe Bildner (F'13)</span> and I were working on learning Twisted yesterday and it's pretty awesome.</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 11557874,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "katz.stephenj@gmail.com",
            "sender_full_name": "Steve Katz (he) (F'13)",
            "sender_id": 2872,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Contributing and mini-project",
            "submessages": [],
            "timestamp": 1382028657,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/6e3e9e046210f55129bbbc2a1ebcb0d1?d=identicon&version=1",
            "client": "desktop app 0.3.5",
            "content": "<p>I'm interested as well. I don't have any experience with Twisted yet, but I'm excited to learn.</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 11558472,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "beccabainbridge@gmail.com",
            "sender_full_name": "Rebecca Bainbridge (she) (F'13)",
            "sender_id": 2892,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Contributing and mini-project",
            "submessages": [],
            "timestamp": 1382029578,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/0d3a1755b1e2bb0552c4fbb42bd02ef0?d=identicon&version=1",
            "client": "website",
            "content": "<p>I have a copy of the Twisted book which I will put on the bookshelf.</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 11562121,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "staceysern@gmail.com",
            "sender_full_name": "Stacey Sern (she) (m1'20)",
            "sender_id": 855,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Book",
            "submessages": [],
            "timestamp": 1382035202,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/d96d4baab5c40af1eda5fd533d650f25?d=identicon&version=1",
            "client": "desktop app Mac 0.3.8",
            "content": "<p>On reflection, I decided to keep working on my BitTorrent client, but plan to use Twisted once I play with sockets a little to figure out what's going on. Happy to pair with anyone working on IRC though.</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 11599866,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "jeffblagdon@gmail.com",
            "sender_full_name": "Jeff Blagdon (F'13)",
            "sender_id": 2878,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Contributing and mini-project",
            "submessages": [],
            "timestamp": 1382112118,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/d96d4baab5c40af1eda5fd533d650f25?d=identicon&version=1",
            "client": "desktop app Mac 0.3.8",
            "content": "<p><span class=\"user-mention\" data-user-email=\"staceysern@gmail.com\">@Stacey Sern (F'13)</span>  Awesome, thanks!</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 11601830,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "jeffblagdon@gmail.com",
            "sender_full_name": "Jeff Blagdon (F'13)",
            "sender_id": 2878,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Book",
            "submessages": [],
            "timestamp": 1382115681,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/e6e28e6763c390b7a49f17be932d57ad?d=identicon&version=1",
            "client": "desktop app Mac 0.3.8",
            "content": "<p>I'm trying to benchmark sending POST requests using a Twisted web client and server. I've got it nominally working, but I'm experiencing very weird behavior where the requests seem to be processed in batches, e.g. 600 requests return very quickly, then there's a few seconds pause, then some more requests return, etc. Anybody want to help me figure out what's going on here? Code is in the .py files here: <a href=\"https://github.com/tthieman/bookie\" target=\"_blank\" title=\"https://github.com/tthieman/bookie\">https://github.com/tthieman/bookie</a></p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 11717335,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "travis.thieman@gmail.com",
            "sender_full_name": "Travis Thieman (F'13)",
            "sender_id": 2881,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "benchmarking twisted web",
            "submessages": [],
            "timestamp": 1382383918,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/e1554622707bedd9202884900430b838?d=identicon&version=1",
            "client": "desktop app Mac 0.3.8",
            "content": "<p>Hi Travis.  The client side of your benchmark is doing too much parallelism; you're making 1000 outgoing connections all at once, which means that you're going to get very \"chunky\" behavior, as you've observed.</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 11773718,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "glyph@twistedmatrix.com",
            "sender_full_name": "Glyph Lefkowitz",
            "sender_id": 1816,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "benchmarking twisted web",
            "submessages": [],
            "timestamp": 1382487736,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/e1554622707bedd9202884900430b838?d=identicon&version=1",
            "client": "desktop app Mac 0.3.8",
            "content": "<p>That's because all the responses are going to arrive very fast (since the server has almost no work to do) which means that the client is going to apparently be \"stuck\" handling a large amount of data, since it's going to be processing all those responses before it tries to do more I/O.</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 11773725,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "glyph@twistedmatrix.com",
            "sender_full_name": "Glyph Lefkowitz",
            "sender_id": 1816,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "benchmarking twisted web",
            "submessages": [],
            "timestamp": 1382487791,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/d96d4baab5c40af1eda5fd533d650f25?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>I'm trying to implment something similar to <a href=\"http://twistedmatrix.com/trac/export/29073/branches/websocket-4173-2/doc/web/howto/websocket.xhtml\" target=\"_blank\" title=\"http://twistedmatrix.com/trac/export/29073/branches/websocket-4173-2/doc/web/howto/websocket.xhtml\">this</a> but the <code>from twisted.web.websocket import WebSocketHandler, WebSocketSite</code> fails. Python seems to think there is no <code>websocket</code> module inside <code>twisted.web</code>. Any idea why?</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 12974194,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "jeffblagdon@gmail.com",
            "sender_full_name": "Jeff Blagdon (F'13)",
            "sender_id": 2878,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "websocket",
            "submessages": [],
            "timestamp": 1384815008,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/1cb366b0fb685ba2003085e766225817?d=identicon&version=1",
            "client": "website",
            "content": "<p>not sure if this is your solution, but it seems to be the same problem: <a href=\"http://stackoverflow.com/questions/15060984/twisted-websockets-import-error\" target=\"_blank\" title=\"http://stackoverflow.com/questions/15060984/twisted-websockets-import-error\">http://stackoverflow.com/questions/15060984/twisted-websockets-import-error</a></p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 12974402,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "allison.kaptur@gmail.com",
            "sender_full_name": "Allison Kaptur (S'12)",
            "sender_id": 809,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "websocket",
            "submessages": [],
            "timestamp": 1384815231,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/1cb366b0fb685ba2003085e766225817?d=identicon&version=1",
            "client": "website",
            "content": "<p><span class=\"user-mention\" data-user-email=\"jeffblagdon@gmail.com\">@Jeff Blagdon (F'13)</span> ^</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 12974407,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "allison.kaptur@gmail.com",
            "sender_full_name": "Allison Kaptur (S'12)",
            "sender_id": 809,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "websocket",
            "submessages": [],
            "timestamp": 1384815238,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/d96d4baab5c40af1eda5fd533d650f25?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>Yeah, Alan and I are reading that right now :)</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 12974453,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "jeffblagdon@gmail.com",
            "sender_full_name": "Jeff Blagdon (F'13)",
            "sender_id": 2878,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "websocket",
            "submessages": [],
            "timestamp": 1384815260,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/1cb366b0fb685ba2003085e766225817?d=identicon&version=1",
            "client": "website",
            "content": "<p>great minds :)</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 12974459,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "allison.kaptur@gmail.com",
            "sender_full_name": "Allison Kaptur (S'12)",
            "sender_id": 809,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "websocket",
            "submessages": [],
            "timestamp": 1384815269,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/d96d4baab5c40af1eda5fd533d650f25?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>I'm trying to make my Twisted app WebSocket-savvy and I'm using <a href=\"https://github.com/MostAwesomeDude/txWS\" target=\"_blank\" title=\"https://github.com/MostAwesomeDude/txWS\">txWS</a> to make it happen. According to the docs, I just need to wrap my factory class with <code>txws.WebSocketFactory</code> like so:</p>\n<div class=\"codehilite\"><pre><span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n    <span class=\"n\">reactor</span><span class=\"o\">.</span><span class=\"n\">listenTCP</span><span class=\"p\">(</span><span class=\"mi\">8000</span><span class=\"p\">,</span> <span class=\"n\">txws</span><span class=\"o\">.</span><span class=\"n\">WebSocketFactory</span><span class=\"p\">(</span><span class=\"n\">MyHTTPFactory</span><span class=\"p\">()))</span>\n    <span class=\"n\">reactor</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">()</span>\n</pre></div>\n\n\n<p>I'm using <code>twisted.web.http</code> to create a simple HTTP server. Here's the code:</p>\n<div class=\"codehilite\"><pre><span class=\"k\">class</span> <span class=\"nc\">MyRequestHandler</span><span class=\"p\">(</span><span class=\"n\">http</span><span class=\"o\">.</span><span class=\"n\">Request</span><span class=\"p\">):</span>\n    <span class=\"n\">resources</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"s\">&#39;/&#39;</span><span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"s\">r&#39;&lt;script&gt;&#39;</span>\n              <span class=\"s\">&#39;(function () {&#39;</span>\n              <span class=\"s\">&#39;var ws = new WebSocket(&quot;ws://localhost:8000&quot;);&#39;</span>\n              <span class=\"s\">&#39;ws.onopen = function() { console.log(&quot;we in here&quot;) };&#39;</span>\n              <span class=\"s\">&#39;}());&#39;</span>\n              <span class=\"s\">&#39;&lt;/script&gt;&#39;</span>\n              <span class=\"s\">&#39;&lt;h1&gt;O hai&lt;/h1&gt;&#39;</span>\n              <span class=\"s\">&#39;&lt;body&gt;&lt;/body&gt;&#39;</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">process</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">print</span> <span class=\"s\">&#39;process got called&#39;</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">setHeader</span><span class=\"p\">(</span><span class=\"s\">&#39;Content-Type&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;text/html&#39;</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">path</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">resources</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">resources</span><span class=\"p\">[</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"p\">])</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">setResponseCode</span><span class=\"p\">(</span><span class=\"n\">http</span><span class=\"o\">.</span><span class=\"n\">NOT_FOUND</span><span class=\"p\">,</span> <span class=\"s\">r&#39;Sorry, dogg. We dont have those here&#39;</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">finish</span><span class=\"p\">()</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">MyHTTP</span><span class=\"p\">(</span><span class=\"n\">http</span><span class=\"o\">.</span><span class=\"n\">HTTPChannel</span><span class=\"p\">):</span>\n    <span class=\"k\">print</span> <span class=\"s\">&#39;MyHTTP initialized&#39;</span>\n    <span class=\"n\">requestFactory</span> <span class=\"o\">=</span> <span class=\"n\">MyRequestHandler</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">MyHTTPFactory</span><span class=\"p\">(</span><span class=\"n\">http</span><span class=\"o\">.</span><span class=\"n\">HTTPFactory</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">buildProtocol</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">addr</span><span class=\"p\">):</span>\n        <span class=\"k\">print</span> <span class=\"s\">&#39;inside echofactory&#39;</span>\n        <span class=\"k\">return</span> <span class=\"n\">MyHTTP</span><span class=\"p\">()</span>\n</pre></div>\n\n\n<p>The problem is that <code>MyRequestHandler.resources</code> is never getting looked at. For some reason, wrapping my factory class with <code>WebSocketFactory</code> seems to be obstructing things. Here's what I know:</p>\n<p>1. Even though <code>MyRequestHandler.resources</code> isn't getting called when I try to load the site, I *am* able to create a new WebSocket object from the browser console.<br>\n2. <code>resources</code> *is* getting referenced when I remove the <code>WebSocket Factory</code> wrapper in <code>main</code>.<br>\n3. The text and JavaScript inside <code>resources</code> *does* get served properly in the unwrapped case.</p>\n<p>Does anyone have any idea why the <code>WebSocketFactory</code> wrapper might be breaking things, or how I might go about debugging this?</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13025439,
            "is_me_message": false,
            "last_edit_timestamp": 1384903013,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "jeffblagdon@gmail.com",
            "sender_full_name": "Jeff Blagdon (F'13)",
            "sender_id": 2878,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Websocket weirdness",
            "submessages": [],
            "timestamp": 1384902397,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/d96d4baab5c40af1eda5fd533d650f25?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>Figured this out last night. Needed to be listening on a separate port for WS connections. Wrapped TCPFactory with WebSocketFactory on a different port instead and everything's working fine.</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13056652,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "jeffblagdon@gmail.com",
            "sender_full_name": "Jeff Blagdon (F'13)",
            "sender_id": 2878,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Websocket weirdness",
            "submessages": [],
            "timestamp": 1384964292,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/d96d4baab5c40af1eda5fd533d650f25?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>Is it possible to create a Protocol object that listens for incoming data (i.e., gets the <code>dataReceived</code> callback) that isn't spawned from a <code>Factory</code>? I figured I'd be able to do this:</p>\n<div class=\"codehilite\"><pre><span class=\"k\">class</span> <span class=\"nc\">myProtocol</span><span class=\"p\">(</span><span class=\"n\">protocol</span><span class=\"o\">.</span><span class=\"n\">Protocol</span><span class=\"p\">):</span>\n    <span class=\"n\">mysock</span> <span class=\"o\">=</span> <span class=\"n\">socket</span><span class=\"o\">.</span><span class=\"n\">socket</span><span class=\"p\">()</span>\n    <span class=\"n\">mysock</span><span class=\"o\">.</span><span class=\"n\">connect</span><span class=\"p\">((</span><span class=\"s\">&#39;localhost&#39;</span><span class=\"p\">,</span> <span class=\"mi\">8000</span><span class=\"p\">))</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">transport</span> <span class=\"o\">=</span> <span class=\"n\">internet</span><span class=\"o\">.</span><span class=\"n\">interfaces</span><span class=\"o\">.</span><span class=\"n\">ITransport</span><span class=\"p\">(</span><span class=\"n\">mysock</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">dataReceived</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">):</span>\n        <span class=\"n\">dosomestuffheere</span>\n</pre></div>\n\n\n<p>but I get the following error:</p>\n<div class=\"codehilite\"><pre><span class=\"ne\">TypeError</span><span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"s\">&#39;Could not adapt&#39;</span><span class=\"p\">,</span> <span class=\"o\">&lt;</span><span class=\"n\">socket</span><span class=\"o\">.</span><span class=\"n\">_socketobject</span> <span class=\"nb\">object</span> <span class=\"n\">at</span> <span class=\"mh\">0x10ee52f30</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"o\">&lt;</span><span class=\"n\">InterfaceClass</span> <span class=\"n\">twisted</span><span class=\"o\">.</span><span class=\"n\">internet</span><span class=\"o\">.</span><span class=\"n\">interfaces</span><span class=\"o\">.</span><span class=\"n\">ITransport</span><span class=\"o\">&gt;</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>Am I screwing up somewhere? Or do I need to use a factory here?</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13059867,
            "is_me_message": false,
            "last_edit_timestamp": 1384968341,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "jeffblagdon@gmail.com",
            "sender_full_name": "Jeff Blagdon (F'13)",
            "sender_id": 2878,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Creating protocol without Factory",
            "submessages": [],
            "timestamp": 1384968294,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/d96d4baab5c40af1eda5fd533d650f25?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>Looks like <a href=\"http://twistedmatrix.com/documents/13.1.0/api/twisted.internet.protocol.ClientCreator.html\" target=\"_blank\" title=\"http://twistedmatrix.com/documents/13.1.0/api/twisted.internet.protocol.ClientCreator.html\">ClientCreator</a> will do the trick after all, since it subclasses <code>protocol.BaseProtocol</code>.</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13060091,
            "is_me_message": false,
            "last_edit_timestamp": 1384968661,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "jeffblagdon@gmail.com",
            "sender_full_name": "Jeff Blagdon (F'13)",
            "sender_id": 2878,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Creating protocol without Factory",
            "submessages": [],
            "timestamp": 1384968588,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/e1554622707bedd9202884900430b838?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>All Protocol objects are spawned from Factory objects; that's just how connection setup works :).  ClientCreator doesn't work because it subclasses BaseProtocol (in fact it doesn't do that, I'm not sure why you thought it did?), it works because it constructs a factory (_InstanceFactory) for you which builds the protocol class you passed it.</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13163228,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "glyph@twistedmatrix.com",
            "sender_full_name": "Glyph Lefkowitz",
            "sender_id": 1816,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Creating protocol without Factory",
            "submessages": [],
            "timestamp": 1385147158,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/e1554622707bedd9202884900430b838?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>Arguably it's a design error in Twisted that the Protocol class doesn't <code>classProvides(IProtocolFactory)</code> and have a <code>buildProtocol</code> classmethod</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13163279,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "glyph@twistedmatrix.com",
            "sender_full_name": "Glyph Lefkowitz",
            "sender_id": 1816,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Creating protocol without Factory",
            "submessages": [],
            "timestamp": 1385147186,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/e1554622707bedd9202884900430b838?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>but in more recent versions of Twisted you can at least do this:</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13163285,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "glyph@twistedmatrix.com",
            "sender_full_name": "Glyph Lefkowitz",
            "sender_id": 1816,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Creating protocol without Factory",
            "submessages": [],
            "timestamp": 1385147198,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/e1554622707bedd9202884900430b838?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<div class=\"codehilite\"><pre>&gt;&gt;&gt; from twisted.internet.protocol import Factory, Protocol\n&gt;&gt;&gt; from twisted.internet.endpoints import clientFromString\n&gt;&gt;&gt; client = clientFromString(reactor, &quot;tcp:example.com:80&quot;).connect(Factory.forProtocol(Protocol))\n</pre></div>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13163386,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "glyph@twistedmatrix.com",
            "sender_full_name": "Glyph Lefkowitz",
            "sender_id": 1816,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Creating protocol without Factory",
            "submessages": [],
            "timestamp": 1385147330,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/e1554622707bedd9202884900430b838?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>Assuming your Python prompt is Twisted-enabled (<code>bpython-urwid -T</code> or <code>python -m twisted.conch.stdio</code>) you can wait for the <code>client</code> Deferred and see you've got an instance of <code>Protocol</code> as a result.</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13163416,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "glyph@twistedmatrix.com",
            "sender_full_name": "Glyph Lefkowitz",
            "sender_id": 1816,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Creating protocol without Factory",
            "submessages": [],
            "timestamp": 1385147393,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/d96d4baab5c40af1eda5fd533d650f25?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>Thanks <span class=\"user-mention\" data-user-email=\"glyph@twistedmatrix.com\">@Glyph Lefkowitz</span> . In my case, what I really wanted was just for my own class to be able to tie into the Twisted event loop, so I created a TCP endpoint in much the same way you explained.</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13179444,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "jeffblagdon@gmail.com",
            "sender_full_name": "Jeff Blagdon (F'13)",
            "sender_id": 2878,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "Creating protocol without Factory",
            "submessages": [],
            "timestamp": 1385172600,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/d96d4baab5c40af1eda5fd533d650f25?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>Is there any reason why I wouldn't be receiving the <code>connectionLost</code> callback when the user closes his or her browser window?</p>\n<div class=\"codehilite\"><pre><span class=\"k\">class</span> <span class=\"nc\">WebSocket</span><span class=\"p\">(</span><span class=\"n\">protocol</span><span class=\"o\">.</span><span class=\"n\">Protocol</span><span class=\"p\">):</span>\n    <span class=\"n\">websockets</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n\n    <span class=\"nd\">@classmethod</span>\n    <span class=\"k\">def</span> <span class=\"nf\">add_socket</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">ws</span><span class=\"p\">):</span>\n        <span class=\"k\">print</span> <span class=\"s\">&#39;adding a websocket&#39;</span>\n        <span class=\"n\">WebSocket</span><span class=\"o\">.</span><span class=\"n\">websockets</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">ws</span><span class=\"p\">)</span>\n\n    <span class=\"nd\">@classmethod</span>\n    <span class=\"k\">def</span> <span class=\"nf\">broadcast</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">message</span><span class=\"p\">):</span>\n        <span class=\"k\">for</span> <span class=\"n\">ws</span> <span class=\"ow\">in</span> <span class=\"n\">WebSocket</span><span class=\"o\">.</span><span class=\"n\">websockets</span><span class=\"p\">:</span>\n            <span class=\"n\">ws</span><span class=\"o\">.</span><span class=\"n\">message_queue</span><span class=\"o\">.</span><span class=\"n\">put</span><span class=\"p\">(</span><span class=\"n\">message</span><span class=\"p\">)</span>\n            <span class=\"n\">ws</span><span class=\"o\">.</span><span class=\"n\">send_all_messages</span><span class=\"p\">()</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">connectionMade</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">message_queue</span> <span class=\"o\">=</span> <span class=\"n\">Queue</span><span class=\"p\">()</span>\n        <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">BitClient</span><span class=\"o\">.</span><span class=\"n\">message_list</span><span class=\"p\">)):</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">message_queue</span><span class=\"o\">.</span><span class=\"n\">put</span><span class=\"p\">(</span><span class=\"n\">BitClient</span><span class=\"o\">.</span><span class=\"n\">message_list</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">])</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">send_all_messages</span><span class=\"p\">()</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">connectionLost</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>  <span class=\"c\"># &lt;&lt;-- Not getting this callback</span>\n        <span class=\"n\">pudb</span><span class=\"o\">.</span><span class=\"n\">set_trace</span><span class=\"p\">()</span>\n        <span class=\"k\">print</span> <span class=\"s\">&#39;connection lost for&#39;</span><span class=\"p\">,</span> <span class=\"bp\">self</span>\n        <span class=\"n\">WebSocket</span><span class=\"o\">.</span><span class=\"n\">websockets</span><span class=\"o\">.</span><span class=\"n\">remove</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">send_all_messages</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">print</span> <span class=\"s\">&#39;SENDING ALL MESSAGES&#39;</span>\n        <span class=\"k\">while</span> <span class=\"ow\">not</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">message_queue</span><span class=\"o\">.</span><span class=\"n\">empty</span><span class=\"p\">():</span>\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">transport</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">message_queue</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">())</span>\n</pre></div>\n\n\n<p>I thought it might have something to do with txWS, which I'm using for websockets, but it shouldn't matter if Twisted is just looking at the underlying TCP connection. Any idea what's going on?</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13327212,
            "is_me_message": false,
            "last_edit_timestamp": 1385493266,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "jeffblagdon@gmail.com",
            "sender_full_name": "Jeff Blagdon (F'13)",
            "sender_id": 2878,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "not getting connectionLost callback",
            "submessages": [],
            "timestamp": 1385493223,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/d96d4baab5c40af1eda5fd533d650f25?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>Never mind \u2014 in order to properly implement the method you need to include <code>reason</code> in the list of arguments. I was confused since there's a default value in the docs. Works fine if you substitute <code>def connectionLost(self, reason)</code> on the relevant line.</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13327388,
            "is_me_message": false,
            "last_edit_timestamp": 1385493517,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "jeffblagdon@gmail.com",
            "sender_full_name": "Jeff Blagdon (F'13)",
            "sender_id": 2878,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "not getting connectionLost callback",
            "submessages": [],
            "timestamp": 1385493478,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/2a4723fb1b67fb2ba8ecfcca9857f409?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>find . -name \"*.pyc\" -exec rm {} \\;</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13571160,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "paulwang727@gmail.com",
            "sender_full_name": "Paul Wang (F'13)",
            "sender_id": 2883,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "rm pyc",
            "submessages": [],
            "timestamp": 1386018032,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/1cb366b0fb685ba2003085e766225817?d=identicon&version=1",
            "client": "website",
            "content": "<p><span class=\"user-mention\" data-user-email=\"paulwang727@gmail.com\">@Paul Wang (F'13)</span> is that recursive?</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13571224,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "allison.kaptur@gmail.com",
            "sender_full_name": "Allison Kaptur (S'12)",
            "sender_id": 809,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "rm pyc",
            "submessages": [],
            "timestamp": 1386018123,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/2a4723fb1b67fb2ba8ecfcca9857f409?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p><span class=\"user-mention\" data-user-email=\"allison@hackerschool.com\">@Allison Kaptur</span> yup, from the current directory</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13571288,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "paulwang727@gmail.com",
            "sender_full_name": "Paul Wang (F'13)",
            "sender_id": 2883,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "rm pyc",
            "submessages": [],
            "timestamp": 1386018216,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/1cb366b0fb685ba2003085e766225817?d=identicon&version=1",
            "client": "website",
            "content": "<p>nifty</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13571293,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "allison.kaptur@gmail.com",
            "sender_full_name": "Allison Kaptur (S'12)",
            "sender_id": 809,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "rm pyc",
            "submessages": [],
            "timestamp": 1386018223,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/2a4723fb1b67fb2ba8ecfcca9857f409?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>I use it so often I alias it in my .bashrc file</p>\n<div class=\"codehilite\"><pre>alias rmpyc=&#39;find . -name &quot;*.pyc&quot; -exec rm {} \\;&#39;\n</pre></div>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13571372,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "paulwang727@gmail.com",
            "sender_full_name": "Paul Wang (F'13)",
            "sender_id": 2883,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "rm pyc",
            "submessages": [],
            "timestamp": 1386018340,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/2a4723fb1b67fb2ba8ecfcca9857f409?d=identicon&version=1",
            "client": "desktop app Mac 0.3.10",
            "content": "<p>Hey <span class=\"user-mention\" data-user-email=\"staceysern@gmail.com\">@Stacey Sern (F'13)</span>,<br>\nFor  <a href=\"http://twistedmatrix.com/trac/ticket/6648\" target=\"_blank\" title=\"http://twistedmatrix.com/trac/ticket/6648\">ticket 6678</a> I was wondering if you could clarify the last post regarding dictionary formats. Thank you!</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13573430,
            "is_me_message": false,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "paulwang727@gmail.com",
            "sender_full_name": "Paul Wang (F'13)",
            "sender_id": 2883,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "ticket 6678",
            "submessages": [],
            "timestamp": 1386021240,
            "topic_links": [],
            "type": "stream"
        },
        {
            "avatar_url": "https://secure.gravatar.com/avatar/0d3a1755b1e2bb0552c4fbb42bd02ef0?d=identicon&version=1",
            "client": "website",
            "content": "<p>I documented dictionaries as something like  <code>L{dict} of L{bytes} -&gt; L{list} of L{bytes}</code> but the feedback was that people did not like the arrow which is not standard Python notations.  So I am going to change the format to use the word mapping instead.  The previous example would be  <code>L{dict} mapping L{bytes} to L{list} of L{bytes}</code>.</p>",
            "content_type": "text/html",
            "display_recipient": "twisted",
            "flags": [
                "read",
                "historical"
            ],
            "id": 13574692,
            "is_me_message": false,
            "last_edit_timestamp": 1386023122,
            "reactions": [],
            "recipient_id": 25695,
            "sender_email": "staceysern@gmail.com",
            "sender_full_name": "Stacey Sern (she) (m1'20)",
            "sender_id": 855,
            "sender_realm_str": "recurse",
            "stream_id": 21763,
            "subject": "ticket 6678",
            "submessages": [],
            "timestamp": 1386022996,
            "topic_links": [],
            "type": "stream"
        }
    ],
    "msg": "",
    "result": "success"
}
